@page "/"

@inject IHttpClientFactory httpClientFactory
@inject CardService cardService

@using Howest.MagicCards.Shared.Filters;
@using Howest.MagicCards.Web.Services;

<div class="row">
    <div class="col-md-2">
        <CardFilter />
        <div class="pagination">
            <button class="btn btn-primary" disabled="@cardService.IsFirstPage" @onclick="cardService.GoToPreviousPage">Previous</button>
            <button class="btn btn-primary" disabled="@cardService.IsLastPage" @onclick="cardService.GoToNextPage">Next</button>
        </div>
    </div>
    <div class="col-md-7">
        <CardList />
    </div>
    <div class="col-md-3">
        <Deck />
    </div>
</div>

<style>
    .pagination {
        display: flex;
        justify-content: space-between;
        margin-top: 1rem;
    }

    .pagination-button {
        padding: 0.375rem 0.75rem;
        font-size: 0.875rem;
        border-radius: 0.25rem;
    }

    .pagination-button:disabled {
        opacity: 0.6;
        cursor: not-allowed;
    }
</style>

@code {
    protected override async Task OnInitializedAsync()
    {
        await cardService.LoadCards();
        Console.WriteLine(cardService.Cards.Count());
    }
}